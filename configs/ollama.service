# /etc/systemd/system/ollama.service
[Unit]
Description=Ollama Service (High Priority AI Inference)
After=network.target

[Service]
ExecStart=/usr/bin/ollama serve
User=ai-user
Group=ai-user
Restart=always
RestartSec=3

# CPU Scheduling
# --------------
# SCHED_BATCH: Good for non-interactive, throughput-focused tasks
CPUSchedulingPolicy=batch
# Nice=-5: Higher priority than normal tasks (0)
Nice=-5

# Memory Protection
# -----------------
# Prevent OOM killer from targeting this service
OOMScoreAdjust=-500

# Capability bounding (Security)
CapabilityBoundingSet=CAP_NET_BIND_SERVICE
AmbientCapabilities=CAP_NET_BIND_SERVICE
NoNewPrivileges=true

[Install]
WantedBy=default.target
